from pylibdmtx.pylibdmtx import encode
from PIL import Image

data = "12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,12332,454554634,".encode("utf-8")   # русские буквы → байты UTF-8
encoded = encode(data)

img = Image.frombytes("RGB", (encoded.width, encoded.height), encoded.pixels)
img.save("datamatrix.png")
print("Готово: datamatrix.png")
